<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <link rel="stylesheet" type="text/css" href="./nav.css" />
    <title>Fetch multy image</title>
  </head>
  <body>
    <div class="swap">
      <ul>
          <li><a href="index.html">Home</a></li>
              <li><a href="blob.html">Blob</a></li>
              <li><a href="readpoem.html">Text</a></li>
              <li><a href="readcsv.html">CSV</a></li>
              <li><a href="readfilearray.html">Multy Image</a></li>
              <li><a href="readjson.html">Json</a></li>
          </li>
        </ul>
        <div id="head">
            <h1 id="h1_head">FETCH MULTY IMAGE</h1>
          </div>    
  </div>      
  <div id="head-link">
    <div><a href="/">enter</a>|<a href="/logs">list</a></div>
  </div>

    <script>
      console.log("about to fetch some rainbows");
      const filenames = [
        "imageblob/daniele-levis-pelusi-311027-unsplash.jpg",
        "imageblob/guy-stevens-746794-unsplash.jpg",
        "imageblob/sharon-pittaway-98257-unsplash.jpg"
      ];
      catchRainbows(filenames)
        .then(response => {
          console.log("yay");
        })
        .catch(error => {
          console.log("error!");
          console.error(error);
        });
      async function catchRainbows(filenames) {
        for (let filename of filenames) {
          const response = await fetch(filename);
          const blob = await response.blob();
          const img = document.createElement("img");
          img.src = URL.createObjectURL(blob);
          img.width = "400";
          document.body.append(img);
        }
      }
    </script>
  </body>
</html>
